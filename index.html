<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title></title>
  <meta name="description" content="">
  <meta name="author" content="">

  <meta name="viewport" content="width=device-width,initial-scale=1">

  <!-- CSS concatenated and minified via ant build script-->
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="license" href="http://creativecommons.org/licenses/by/3.0/us/"/>
  <!-- end CSS-->

  <script src="js/libs/modernizr-2.0.6.min.js"></script>
</head>

<body>

  <div id="container">
    
    <header id="header">
     <img class="logo" src="img/pleiades-logo-neg-tag.png" alt="Pleiades Logo">
    </header>
    
    <div id="main" role="main">

    <div id="middle">
      <div class="middle align-center">
        <p class="app-welcome">
          A community-built gazetteer and graph of ancient places
        </p>
      </div>
    </div>

    <div id="bottom">
      <div id="map" class="bottom align-center"></div>
      <div id="search-form" class="bottom align-center">
        <br/>
        <form action="http://pleiades.stoa.org/search">
          <fieldset>
            <legend>Search the 34,067 Places</legend>
            <!--span class="glass"><i></i></span-->
            <input class="text" type="text" id="q" name="SearchableText" cols="40" placeholder="Internum Mare" value="" required="1"/>
            <input type="hidden" name="portal_type" value="Place" />
            <input class="submit" type="submit" value="Go">
          </fieldset>
        </form>
        <br/>
      </div>

      <div id="more">
        <div class="left">
          <!--p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p-->
          <p>Springing from the Classical Atlas Project and the Barrington Atlas of the Greek and Roman World, Pleiades is a historical gazetteer and more. It associates names and locations in time and provides structured information about the quality and provenance of these entities. There is also a graph in Pleiades: names and locations are collected within places and these collections are associated with other geographically connected places. Pleiades also serves as a vocabulary for talking about the geography of the ancient world within Linked Data sets and is referenced by research projects such as Google Ancient Places and PELAGIOS.</p>
          <p><a href="http://pleiades.stoa.org/places/">More about the data ...</a></p>
        </div>
        <div class="right">
        <p>Pleiades is one hundred percent open source, one hundred percent openly licensed and one hundred percent editable. Our open source software gets used and improved by a diverse crowd of programmers in the humanities and beyond. Our openly licensed resources have no surprises or encumberances, and their editability allows Pleiades users to correct or enrich resources â€“ thereby tailoring the gazetteer and the entire linked data vocabulary to better meet their own particular needs. Pleiades welcomes your contribution, no matter how small, and we have a number of internal projects to suggest.</p>
        <p><a href="http://pleiades.stoa.org/front-page">More about contributing ...</a></p>
        <!--p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p-->
        </div>
        <div class="clearfix"></div>
      </div>
    </div>

    <div id="sponsors" class="bottom align-center">
      <p>Pleiades is supported by:</p>
      <img src="img/NEH-Logo-Horizontal_RGB.png"></div>
    </div>

    <footer id="footer">
      <div class="rights">Some rights reserved (cc-by) Ancient World Mapping Center, Institute for the Study of the Ancient World and the Contributors</div>
    </footer>

  </div> <!--! end of #container -->

  <div id="infoWindowContent" style="display:none">
    <div id="iwcContainer">
      <h2 id="iwcTitle">Title</h3>
      <p id="iwcDescription">Description</p>
      <p id="iwcLink"><a href="#">Details</a></p>
      <p id="iwcNav">
        <a id="iwcPrev">&lt;&lt; Prev</a> | <a id="iwcNext">Next &gt;&gt;</a>
      </p>
    </div>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.6.2.min.js"><\/script>')</script>
  <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

  <script>
    //var MTID = 'aw';

    var latlng0 = new google.maps.LatLng(35.0, 20.0);
    var mapOptions = {
      mapTypeId: google.maps.MapTypeId.TERRAIN,
      center: latlng0,
      disableDefaultUI: true,
      disableDoubleClickZoom: true,
      draggable: false,
      scrollwheel: false,
      zoom: 6
      };
    var map = new google.maps.Map(document.getElementById("map"), mapOptions);

    var latlng = new google.maps.LatLng(35.0, 20.0);
    var placeIcon = new google.maps.MarkerImage(
      "http://google-maps-icons.googlecode.com/files/justice.png");
    var marker = new google.maps.Marker({icon: placeIcon});

    var msg = null;
    var infoWindow = new google.maps.InfoWindow(
        {offset: new google.maps.Size(12,24)});

    google.maps.event.addListener(infoWindow, 'domready', function() {
      $("#iwcContainer", msg).mouseenter(function(){clearTimeout(timer);$("iwcNav", msg).show();});
      $("#iwcContainer", msg).mouseleave(function(){$("iwcNav", msg).hide();timer=setTimeout(play, interval);});
      $("#iwcPrev", msg).click(function(){back();});
      $("#iwcNext", msg).click(function(){forward();});
    });

    var current = null;
    var next = [];
    var prev = [];

    var timer = null;
    var url = null;
    var count = 0;
    var limit = 100;
    var interval = 14000;

    function play() {
      if (count > limit) {
        current = null;
        return null;
      }
      if (current != null) {
        prev.push(current);
      }
      url = "http://pleiades.stoa.org/randomPlaceJson"; //next.shift();
      $.getJSON(url, function(data) {
        current = data["id"];
        show(data);
        count = count + 1;
        timer = setTimeout(play, interval);
      });
    }

    function forward() {
      if (current != null) { prev.push(current); }
      if (next.length > 0) {
        current = next.shift();
        url = "http://pleiades.stoa.org/places/" + current + "/json";
      }
      else {
        url = "http://pleiades.stoa.org/randomPlaceJson";
      }
      $.getJSON(url, function(data) {
        current = data["id"];
        show(data);
      });
    }

    function back() {
      if (current != null) { next.unshift(current); }
      if (prev.length > 0) {
        current = prev.pop();
        url = "http://pleiades.stoa.org/places/" + current + "/json";
      }
      else {
        return null;
      }
      $.getJSON(url, function(data) {
        current = data["id"];
        show(data);
      });
    }

    function show(data) {
      var bounds = data["bbox"];
      if (bounds == null) {
        latlng = latlng0;
      }
      else {
        latlng = new google.maps.LatLng(
          (bounds[1]+bounds[3])/2.0, (bounds[0]+bounds[2])/2.0);
      }

      infoWindow.close();
      var msg = $("#infoWindowContent").clone();
      var link = "http://pleiades.stoa.org/places/" + data["id"];
      $("#iwcLink a", msg).attr("href", link);
      $("#iwcLink a", msg).text(link);
      $("#iwcTitle", msg).text(data["title"]);
      $("#iwcDescription", msg).text(data["description"]);
      $(msg).show();
      $("iwcNav", msg).hide();
      infoWindow.setPosition(latlng);
      infoWindow.setContent($(msg).html());
      infoWindow.open(map);
      
      marker.setPosition(latlng);
      
      if (bounds == null) {
        marker.setMap(null);
        map.panTo(new google.maps.LatLng(latlng.lat()+3.0, latlng.lng()+1.2));
        map.setZoom(5);
      }
      else {
        marker.setMap(map);
        map.panTo(new google.maps.LatLng(latlng.lat()+1.8, latlng.lng()+1.2));
        map.setZoom(6);
      }
    }

    $(document).ready(function(){play();});

  </script>

  <!-- scripts concatenated and minified via ant build script-->
  <!--script defer src="js/plugins.js"></script-->
  <!--script defer src="js/script.js"></script-->
  <!-- end scripts-->


  <script> // Change UA-XXXXX-X to be your site's ID
    window._gaq = [['_setAccount','UAXXXXXXXX1'],['_trackPageview'],['_trackPageLoadTime']];
    Modernizr.load({
      load: ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js'
    });
  </script>


  <!--[if lt IE 7 ]>
    <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
    <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
  <![endif]-->
  
</body>
</html>
